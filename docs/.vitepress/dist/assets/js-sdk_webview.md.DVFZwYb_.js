import{_ as t,c as a,o as n,a5 as i,m as s,a as l}from"./chunks/framework.B_L4sjTh.js";const F=JSON.parse('{"title":"网页","description":"","frontmatter":{},"headers":[],"relativePath":"js-sdk/webview.md","filePath":"js-sdk/webview.md"}'),h={name:"js-sdk/webview.md"},e=i(`<h1 id="网页" tabindex="-1">网页 <a class="header-anchor" href="#网页" aria-label="Permalink to &quot;网页&quot;">​</a></h1><h2 id="打开一个网页" tabindex="-1">打开一个网页 <a class="header-anchor" href="#打开一个网页" aria-label="Permalink to &quot;打开一个网页&quot;">​</a></h2><p>传入地址，新窗口打开网页。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openWebView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://网页地址&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Test&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>要打开的网址 url</td></tr><tr><td>title</td><td>String</td><td>显示的标题</td></tr><tr><td>useAndroidWebview</td><td>Boolean</td><td>是否使用 android 原生 webview 打开, 否则使用 workplus 订制的 webview</td></tr><tr><td>useSystemWebview</td><td>Boolean</td><td>等同于 useAndroidWebview，只是该参数能用于ios以及android平台</td></tr><tr><td>displayMode</td><td>String</td><td>全屏打开 webview(即不包含原生标题栏)，默认非全屏</td></tr><tr><td>orientation</td><td>number</td><td>横竖屏设置，1 表示竖屏 2表示横屏，默认是追随手机设置</td></tr></tbody></table><h2 id="退出" tabindex="-1">退出 <a class="header-anchor" href="#退出" aria-label="Permalink to &quot;退出&quot;">​</a></h2><p>关闭整个 WebView。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="弹出分享对话框" tabindex="-1">弹出分享对话框 <a class="header-anchor" href="#弹出分享对话框" aria-label="Permalink to &quot;弹出分享对话框&quot;">​</a></h2><p>弹出分享对话框，跳转分享。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">share</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.workplus.io&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WorkPlus&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  coverMediaId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;分享图标mediaId&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  coverUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;分享图标 url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scope: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  summary : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这是一段摘要&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  directly: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;w6s_contact&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  directSession: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;discussion&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>要分享的网页地址</td></tr><tr><td>title</td><td>String</td><td>分享后显示的标题</td></tr><tr><td>coverMediaId</td><td>String</td><td>分享后显示的图标，媒体id</td></tr><tr><td>coverUrl</td><td>String</td><td>分享后显示的图标，网络地址，与 coverMediaId 二选一即可</td></tr><tr><td>scope</td><td>Number</td><td>用于显示范围，0 只显示内部分享的操作，包括&quot;发送给&quot;，&quot;分享到圈子&quot;；1则显示全部</td></tr><tr><td>summary</td><td>String</td><td>分享的内容摘要，一般会放到分享后的描述位置</td></tr><tr><td>directly</td><td>String</td><td>可选值：w6s_contact、w6s_current_session，具体说明请看下方描述</td></tr><tr><td>directSession.id</td><td>String</td><td>会话的id</td></tr><tr><td>directSession.type</td><td>String</td><td>会话的类型</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">directly 参数</p><p>直接执行分享操作支持: <code>w6s_contact</code>对应“分享弹出窗”的“发送给”，为App内部的联系人等列表；<code>w6s_current_session</code>表示直接分享给指定会话，无任何弹出窗或者选择界面。当<code>directly</code>存在值时，<code>scope</code>参数无意义，请忽略, 默认<code>directly</code>为空，也即该接口会显示”分享弹出框“。</p></div><h2 id="控制屏幕旋转" tabindex="-1">控制屏幕旋转 <a class="header-anchor" href="#控制屏幕旋转" aria-label="Permalink to &quot;控制屏幕旋转&quot;">​</a></h2><p>根据参数控制屏幕横屏显示或者竖屏显示。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">changeOrientation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  landscape: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lock: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>landscape</td><td>Boolean</td><td>表示横屏或者竖屏，非必须</td></tr><tr><td>lock</td><td>Boolean</td><td>表示锁定当前横屏或者竖屏的状态, false 表示 app 随用户系统设置来控制旋转，默认是 false</td></tr></tbody></table><blockquote><p>lock 参数在低于 4.9.1 版本的 APP 下可能无效。</p></blockquote><h2 id="添加水印" tabindex="-1">添加水印 <a class="header-anchor" href="#添加水印" aria-label="Permalink to &quot;添加水印&quot;">​</a></h2><p>给页面添加水印。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addWaterMask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  textColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  orgId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;xxxid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  alpha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  verticalPadding: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fontSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>textColor</td><td>String</td><td>字体颜色</td></tr><tr><td>orgId</td><td>String</td><td>组织id，传值则以这个组织下的雇员名显示内容，可不传，默认当前组织</td></tr><tr><td>alpha</td><td>Number</td><td>水印文字透明度 0-1.0之间，可不传， 默认1.0</td></tr><tr><td>verticalPadding</td><td>Number</td><td>水印文字上下的垂直高度（密度），可不传，默认40</td></tr><tr><td>fontSize</td><td>Number</td><td>字体大小，可不传，默认16</td></tr></tbody></table><h2 id="移除水印" tabindex="-1">移除水印 <a class="header-anchor" href="#移除水印" aria-label="Permalink to &quot;移除水印&quot;">​</a></h2><p>给页面移除水印。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeWaterMask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="注册摇一摇监听" tabindex="-1">注册摇一摇监听 <a class="header-anchor" href="#注册摇一摇监听" aria-label="Permalink to &quot;注册摇一摇监听&quot;">​</a></h2><p>注册摇一摇监听。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerShakeListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>前端需要实现<code>onWorkplusShake()</code>方法, 在该处执行自己的业务, 摇一摇后将在该方法回调。</p><div class="warning custom-block"><p class="custom-block-title">onWorkplusShake</p><p>该方法必须为全局方法，并且方法名不可以转换。</p></div><h2 id="注销摇一摇监听" tabindex="-1">注销摇一摇监听 <a class="header-anchor" href="#注销摇一摇监听" aria-label="Permalink to &quot;注销摇一摇监听&quot;">​</a></h2><p>注销摇一摇监听。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unregisterShakeListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="微信分享-会话-朋友圈" tabindex="-1">微信分享(会话/朋友圈) <a class="header-anchor" href="#微信分享-会话-朋友圈" aria-label="Permalink to &quot;微信分享(会话/朋友圈)&quot;">​</a></h2><p>根据接口直接调起微信分享页面。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td>支持</td><td>支持</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w6s.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wxShare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  appId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wx63f4a539bf345965&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这是一个标题&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这是概要&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  thumb: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;base64://xxxxx==&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scene: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.workplus.io&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p>`,59),d=s("table",{"image:":"","base64:AAAAAA":"='"},[s("thead",null,[s("tr",null,[s("th",null,"参数"),s("th",null,"类型"),s("th",null,"说明")])]),s("tbody",null,[s("tr",null,[s("td",null,"appId"),s("td",null,"String"),s("td",null,[l("微信的"),s("code",null,"AppId")])]),s("tr",null,[s("td",null,"title"),s("td",null,"String"),s("td",null,"分享的标题")]),s("tr",null,[s("td",null,"type"),s("td",null,"String"),s("td",null,"分享的消息类型，webpage(网页链接), image(图片)")]),s("tr",null,[s("td",null,"description"),s("td",null,"String"),s("td",null,"描述")]),s("tr",null,[s("td",null,"thumb"),s("td",null,"String"),s("td",null,"缩略图数据，为 base64")]),s("tr",null,[s("td",null,"scene"),s("td",null,"Number"),s("td",null,"0 为聊天界面 1为朋友圈")]),s("tr",null,[s("td",null,"data"),s("td",null,"Object"),s("td",null,"{'url': 'www.workplus.io'} or")])])],-1),p=i(`<p><code>data</code>参数的值，请注意:</p><ul><li>type 为<code>webpage</code>时，url 字段为分享的链接；</li><li>type 为<code>image</code>时，image 为分享的图片链接或者是 base64。</li></ul><h2 id="下拉刷新" tabindex="-1">下拉刷新 <a class="header-anchor" href="#下拉刷新" aria-label="Permalink to &quot;下拉刷新&quot;">​</a></h2><p>页面下拉刷新功能，需要由一系列的接口组合而成，并且该功能是针对当前 WebView 起效。在开发轻应用时要特别注意，特别是单页面应用，在页面切换时，需要考虑是否清空下拉刷新功能。</p><p><strong>使用说明</strong></p><table><thead><tr><th>客户端</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>支持情况</td><td><code>v4.11.6+</code></td><td><code>v4.11.6+</code></td></tr></tbody></table><h3 id="开启" tabindex="-1">开启 <a class="header-anchor" href="#开启" aria-label="Permalink to &quot;开启&quot;">​</a></h3><p>当页面需要下拉刷新功能时，先通过下方接口，启动“下拉刷新”能力。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sdk.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configPullRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>参数说明</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>enable</td><td>Boolean</td><td>下拉刷新功能的开关</td></tr><tr><td>mode</td><td>String</td><td>下拉的模式，目前仅支持 “default” 的默认类型</td></tr></tbody></table><h3 id="监听下拉" tabindex="-1">监听下拉 <a class="header-anchor" href="#监听下拉" aria-label="Permalink to &quot;监听下拉&quot;">​</a></h3><p>用户下拉屏幕的动作，需要通过下面的方法进行监听。例如一下新闻列表页面，用户下拉页面头部后，该接口的回调就会被触发，此时开发者可以通过调用接口更新新闻列表，成功后手动结束刷新。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sdk.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onPullRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;加载中...)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 调用下方“完成刷新”接口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fail: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="完成刷新" tabindex="-1">完成刷新 <a class="header-anchor" href="#完成刷新" aria-label="Permalink to &quot;完成刷新&quot;">​</a></h3><p>调用该接口后，刷新动作会马上完成，动画会停止并收起。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sdk.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">endPullRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="停止" tabindex="-1">停止 <a class="header-anchor" href="#停止" aria-label="Permalink to &quot;停止&quot;">​</a></h3><p>当页面不需要刷新功能时，需要调用下方接口进行停止。如果需要再次开启，请调用上方的“开启”接口。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sdk.webview.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configPullRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div>`,20),k=[e,d,p];function r(E,o,g,c,y,b){return n(),a("div",null,k)}const v=t(h,[["render",r]]);export{F as __pageData,v as default};
